// Generated by CoffeeScript 1.12.7
(function() {
  'use strict';
  define(['text!/Pages/play/select.html', 'avalon', 'api', 'page', 'avalon.cookie', 'select2'], function(pageMain, avalon, api, page) {
    var select;
    avalon.templateCache.play_select = pageMain;
    select = avalon.define({
      $id: 'play_select',
      title: '选择设备',
      nuid: avalon.vmodels.play.uid,
      url: null,
      loading: '/Assets/logic/common/loading.html',
      list: [],
      getList: function() {
        return api.getApi('/setting/get_list', {}, function(result) {
          if (SUCCESS === result.code) {
            select.list = result.list;
            return setTimeout(function() {
              return $("#FocusMovie0").focus();
            }, 200);
          } else if (ISEMPTY === result.code) {
            return require(['logic/common/tips'], function(tips) {
              return tips.showTips('没有任何设备', 'error');
            });
          } else {
            return require(['logic/common/tips'], function(tips) {
              return tips.showTips(result.msg, 'error');
            });
          }
        });
      },
      change: function(uid) {
        return window.location.href = '/?uid=' + uid;
      },
      init: function(url) {
        avalon.log('play select page load complete');
        avalon.cookie.remove('uid');
        select.url = url;
        return select.getList();
      }
    });
    return select;
  });

}).call(this);

//# sourceMappingURL=select.js.map
